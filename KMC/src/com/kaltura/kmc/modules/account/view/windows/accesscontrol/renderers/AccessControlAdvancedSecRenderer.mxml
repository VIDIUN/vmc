<?xml version="1.0" encoding="utf-8"?>
<renderers:AccessControlRendererBase xmlns:mx="http://www.adobe.com/2006/mxml"
									 creationComplete="onCreationComplete(event)" width="100%" height="100%"
									 horizontalScrollPolicy="off" styleName="tableCellBoxRendererStyle" paddingLeft="4"
									 verticalAlign="middle"
									 xmlns:renderers="com.vidiun.vmc.modules.account.view.windows.accesscontrol.renderers.*">
	<mx:Script>
		<![CDATA[
			import com.vidiun.vo.AccessControlProfileVO;
			import com.vidiun.vo.VidiunPreviewRestriction;
			import com.vidiun.vo.VidiunSessionRestriction;
			import com.vidiun.types.VidiunDirectoryRestrictionType;
			import com.vidiun.vo.VidiunDirectoryRestriction;
			import com.vidiun.types.VidiunSiteRestrictionType;
			import com.vidiun.vo.VidiunSiteRestriction;
			import com.vidiun.vo.VidiunBaseRestriction;


			private function onCreationComplete(event:Event = null):void {
				var acProfile:AccessControlProfileVO = this.data as AccessControlProfileVO;
				if (acProfile != null) {
					var foundRes:Boolean = false;
					for each (var restriction:VidiunBaseRestriction in acProfile.profile.restrictions) {
						if (restriction is VidiunSessionRestriction) {
							advancedSecLabel.text = "VS, ";
							foundRes = true;
						}

						if (restriction is VidiunPreviewRestriction) {
							advancedSecLabel.text += "Preview";
							var len:int = (restriction as VidiunPreviewRestriction).previewLength;
							var min:int = Math.floor(len / 60);
							var sec:int = len % 60;
							advancedSecLabel.text += "(" + min + "m:" + sec + "s)  ";
							foundRes = true;
						}
					}

					if (foundRes) {
						advancedSecLabel.text = advancedSecLabel.text.substr(0, advancedSecLabel.text.length - 2);
					}
					else {
						advancedSecLabel.text = '';
					}
				}
			}


			override public function validateNow():void {
				super.validateNow();
				onCreationComplete();
			}
		]]>
	</mx:Script>
	<mx:Label id='advancedSecLabel' width="100%"/>

</renderers:AccessControlRendererBase>
