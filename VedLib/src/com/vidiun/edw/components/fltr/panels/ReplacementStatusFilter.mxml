<?xml version="1.0" encoding="utf-8"?>
<panels:AdditionalFilter xmlns:mx="http://www.adobe.com/2006/mxml"
						 xmlns:panels="com.vidiun.edw.components.fltr.panels.*"
						 creationComplete="creationCompleteHandler(event)">
	<mx:Script>
		<![CDATA[
			import com.vidiun.types.VidiunEntryModerationStatus;
			import com.vidiun.types.VidiunEntryReplacementStatus;
			import com.vidiun.types.VidiunNullableBoolean;
			
			import mx.events.FlexEvent;
			
			
			override public function set filter(value:Object):void {
				if (!value || value == VidiunEntryReplacementStatus.NONE) {
					//no moderation 
					all.selected = true;
					processing.selected = false;
					readyForReview.selected = false;
				}
				else {
					// one or more moderation types selected
					all.selected = false;
					var mods:Array = value.split(',');
					for each (var mod:String in mods) {
						switch (mod) {
							case VidiunEntryReplacementStatus.APPROVED_BUT_NOT_READY:
							case VidiunEntryReplacementStatus.NOT_READY_AND_NOT_APPROVED:
								processing.selected = true;
								break;
							case VidiunEntryReplacementStatus.READY_BUT_NOT_APPROVED:
								readyForReview.selected = true;
								break;
						}
					}
				}
			}
			
			
			override public function get filter():Object {
				var str:String = '';
				if (processing.selected)
					str += VidiunEntryReplacementStatus.NOT_READY_AND_NOT_APPROVED + "," + 
						VidiunEntryReplacementStatus.APPROVED_BUT_NOT_READY + ",";
				if (readyForReview.selected)
					str += VidiunEntryReplacementStatus.READY_BUT_NOT_APPROVED + ",";
				
				if (str) {
					// remove last ","
					str = str.slice(0, str.length - 1);
					return str;
				}
				return null;
			}
			
			
			protected function creationCompleteHandler(event:FlexEvent):void {
				_buttons = [all, processing, readyForReview];
			}
		]]>
	</mx:Script>
	<mx:CheckBox id="all" width="100%" selected="true" styleName="mainFilterGroupButton"
				 label="{resourceManager.getString('filter', 'allReplacementStatus')}"
				 toolTip="{resourceManager.getString('filter', 'allReplacementStatus')}"
				 click="onDynamicTitleClicked(event)"/>
	<mx:CheckBox id="processing" width="100%" selected="false" styleName="innerFilterGroupButton"
				 label="{resourceManager.getString('filter', 'processingNewBtn')}"
				 toolTip="{resourceManager.getString('filter', 'processingNewBtn')}"
				 click="onDynamicMemberClicked(event)"/>
	<mx:CheckBox id="readyForReview" width="100%" selected="false" styleName="innerFilterGroupButton"
				 label="{resourceManager.getString('filter', 'readyForReviewBtn')}"
				 toolTip="{resourceManager.getString('filter', 'readyForReviewBtn')}"
				 click="onDynamicMemberClicked(event)"/>
</panels:AdditionalFilter>
